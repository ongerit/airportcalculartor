<!DOCTYPE html>
<html>
  <head>
    <title>Airport Calculator</title>
    <!--<link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />-->
    <!--<link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />-->
    <link rel="stylesheet" href="stylesheets/app.css" type="text/css" />
    
   <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <!--<script src="//code.jquery.com/jquery-1.10.2.js"></script>-->
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

  </head>
  <body>
    <div class="container">
        <div class="wrapper">
          <div class="ui-widget">
              <label for="origin">Origin</label>
              <input id="origin"/>
              <label for="end">End</label>
              <input id="end"/>
              
              <input id="btnSubmit" type="submit" name="submit"/>
          </div>
          
        <p>Total Distance:</p>
        <p id="total"></p>
        
        <div id="lat"></div>
        <div id="long"></div>
            
        </div>
    </div>
<script type="text/javascript">
          
$(document).ready(function(){
    var airports = "javascripts/data.json";
    $.getJSON(airports).done(function(data){
      
      
      var data;
      var airportName = [];
      var airportLong = [];
      var airportLat = [];
      
    
      for( var i in data) {
      
      airportName.push(data[i].Airport_Name);
      airportLong.push(data[i].Longitude);
      airportLat.push(data[i].Latitute); 
      
        };
        
        $("#origin,#end").autocomplete({
          source: airportName
        
        });
    
    
      $("#btnSubmit").click(function(){
       
       var valOrigin = $("#origin").val();
       var valEnd = $("#end").val();
       //alert(valOrigin + valEnd );
       
       var indexForOrigin = airportName.indexOf(valOrigin);
       var indexForDest = airportName.indexOf(valEnd);
       
       var originLong, destLong, originLat, destLat;
       
        originLong = airportLong[indexForOrigin];
        originLat = airportLat[indexForOrigin];
        destLong = airportLong[indexForDest];
        destLat = airportLat[indexForDest];
        
                  
              // round to the nearest 1/1000
        function round(x) {
        	return Math.round( x * 1000) / 1000;
        }
          
    
        
        function calculateDist(){

          var R = 3961; //miles
          var dlon = destLong - originLong;
          var dlat = destLat- originLat;
          
          //var a = Math.pow((Math.sin(dlat/2)),2) + Math.cos(originLat) * Math.cos(destLat) * Math.pow((Math.sin(dlon/2)),2);
          var a = Math.pow(Math.sin(dlat/2),2) + Math.cos(originLat) * Math.cos(destLat) * Math.pow(Math.sin(dlon/2),2);
          var c = 2 * Math.atan2(Math.sqrt(a),Math.sqrt(1-a))
          var d = R * c; //(where R is the radius of the Earth)
          var dm = round(d) ;
          

          //console.log(a)
          //console.log(c)
          console.log(d)
          console.log(dm)
          
          $('#total').text(dm);

          //console.log(dlon)
          //console.log(dlat)
          //console.log(destLat)

        
        };
        
        
        calculateDist();

  
      
            alert(originLong +" "+ originLat +" "+ destLong +" "+ destLat);

      
        if ( valOrigin.length < 3 && valEnd.length < 3){
    
  }

  });
      
    });
  

  

  
  
});

  </script>
    
  </body>
</html>